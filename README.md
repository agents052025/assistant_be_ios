# üöÄ CrashCurse AI Backend

–ü–æ—Ç—É–∂–Ω–∞ –±–∞–≥–∞—Ç–æ–∞–≥–µ–Ω—Ç–Ω–∞ AI —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ –±–∞–∑—ñ FastAPI —Ç–∞ OpenAI GPT –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤ –≤—ñ–¥ –º–æ–±—ñ–ª—å–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤.

## ‚ú® –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- **ü§ñ –ë–∞–≥–∞—Ç–æ–∞–≥–µ–Ω—Ç–Ω–∞ AI —Å–∏—Å—Ç–µ–º–∞**: –°–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∞–≥–µ–Ω—Ç–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å
- **‚ö° FastAPI Backend**: –®–≤–∏–¥–∫–∏–π —Ç–∞ —Å—É—á–∞—Å–Ω–∏–π API
- **üîí API Key –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è**: –ó–∞—Ö–∏—â–µ–Ω—ñ endpoint'–∏
- **üåê CORS –ø—ñ–¥—Ç—Ä–∏–º–∫–∞**: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤
- **üìä RESTful API**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω—ñ HTTP endpoints
- **üîÑ Auto-reload**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏
- **üìù API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ Swagger UI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### ü§ñ AI –ê–≥–µ–Ω—Ç–∏

**1. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä (Coordinator)**
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è –∑–∞–ø–∏—Ç—ñ–≤ –º—ñ–∂ –∞–≥–µ–Ω—Ç–∞–º–∏
- –°–∏–Ω—Ç–µ–∑ —Ñ—ñ–Ω–∞–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- –ö–æ–Ω—Ç—Ä–æ–ª—å —è–∫–æ—Å—Ç—ñ

**2. –ü–æ–≥–æ–¥–Ω–∏–π –∞–≥–µ–Ω—Ç (Weather)**
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—ó –ø–æ–≥–æ–¥–∏ –∑–∞ –º—ñ—Å—Ç–∞–º–∏
- –û–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤ –ø—Ä–æ –ø–æ–≥–æ–¥–Ω—ñ —É–º–æ–≤–∏
- –ù–∞–¥–∞–Ω–Ω—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π

**3. –ö–∞–ª–µ–Ω–¥–∞—Ä–Ω–∏–π –∞–≥–µ–Ω—Ç (Calendar)**
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–¥—ñ–π —Ç–∞ –Ω–∞–≥–∞–¥—É–≤–∞–Ω—å
- –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è –∑—É—Å—Ç—Ä—ñ—á–µ–π
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è–º–∏

**4. –ù–∞–≤—ñ–≥–∞—Ü—ñ–π–Ω–∏–π –∞–≥–µ–Ω—Ç (Navigation)**
- –û–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—ó
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–æ—Å–∏–ª–∞–Ω—å –Ω–∞ –∫–∞—Ä—Ç–∏
- –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —á–∞—Å—É –≤ –¥–æ—Ä–æ–∑—ñ

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
crashcurse-backend/
‚îú‚îÄ‚îÄ main.py                    # üöÄ –û—Å–Ω–æ–≤–Ω–∏–π FastAPI –¥–æ–¥–∞—Ç–æ–∫
‚îú‚îÄ‚îÄ run.sh                     # üîß –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫—É
‚îú‚îÄ‚îÄ app/                       # üìÇ –û—Å–Ω–æ–≤–Ω—ñ –º–æ–¥—É–ª—ñ
‚îÇ   ‚îú‚îÄ‚îÄ agents/               # ü§ñ AI –∞–≥–µ–Ω—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ api/routes/           # üõ§Ô∏è API –º–∞—Ä—à—Ä—É—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ core/                 # ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ   ‚îú‚îÄ‚îÄ models/               # üìä –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îî‚îÄ‚îÄ services/             # üîß –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞
‚îú‚îÄ‚îÄ backup/                   # üì¶ –ê—Ä—Ö—ñ–≤–Ω—ñ —Ñ–∞–π–ª–∏
‚îú‚îÄ‚îÄ requirements.txt          # üìã Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ env_example.txt           # üîê –ü—Ä–∏–∫–ª–∞–¥ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚îî‚îÄ‚îÄ README.md                 # üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```bash
git clone <backend-repository-url>
cd crashcurse-backend
```

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

```bash
python3 -m venv venv
source venv/bin/activate  # macOS/Linux
# –∞–±–æ
venv\\Scripts\\activate    # Windows
```

### 3. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

```bash
cp env_example.txt .env
# –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ .env —Ñ–∞–π–ª, –¥–æ–¥–∞–≤—à–∏ –≤–∞—à—ñ API –∫–ª—é—á—ñ
```

**–ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–Ω—ñ:**
```bash
OPENAI_API_KEY=your_openai_api_key_here
CRASHCURSE_API_KEY=supersecretapikey
```

### 5. –ó–∞–ø—É—Å–∫ backend

```bash
# –ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–∫—Ä–∏–ø—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
./run.sh

# –ê–±–æ —Ä—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

## üåê API Endpoints

### –û—Å–Ω–æ–≤–Ω—ñ endpoints

```bash
GET  /                        # –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ backend
GET  /health                  # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É —Å–∏—Å—Ç–µ–º–∏
GET  /docs                    # Swagger UI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

### AI Chat API

```bash
POST /api/v1/chat/send        # –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–æ AI
GET  /api/v1/chat/history     # –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó —á–∞—Ç—É
```

**–ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Ç—É:**
```bash
curl -X POST "http://localhost:8000/api/v1/chat/send" \\
  -H "Content-Type: application/json" \\
  -H "X-API-KEY: supersecretapikey" \\
  -d '{
    "message": "–Ø–∫–∞ –ø–æ–≥–æ–¥–∞ –≤ –ö–∏—î–≤—ñ?",
    "user_id": "user123"
  }'
```

### –ö–∞–ª–µ–Ω–¥–∞—Ä API

```bash
POST /api/v1/calendar/events     # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–¥—ñ—ó
POST /api/v1/calendar/reminders # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è
```

## üîê –ë–µ–∑–ø–µ–∫–∞

### API Key –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

–í—Å—ñ –∑–∞—Ö–∏—â–µ–Ω—ñ endpoint'–∏ –≤–∏–º–∞–≥–∞—é—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫:
```
X-API-KEY: supersecretapikey
```

### CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–£ production —Ä–µ–∂–∏–º—ñ CORS –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –¥–æ–º–µ–Ω—ñ–≤:
```python
ALLOWED_ORIGINS = [
    "https://mobile.labai.ws",
    "https://yourdomain.com"
]
```

## üõ†Ô∏è –†–æ–∑—Ä–æ–±–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞

```bash
# –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ venv
source venv/bin/activate

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏
./run.sh
```

Backend –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞:
- **API**: http://localhost:8000
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**: http://localhost:8000/docs
- **Health check**: http://localhost:8000/health

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –∞–≥–µ–Ω—Ç—ñ–≤

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π —Ñ–∞–π–ª –≤ `app/agents/`
2. –Ü–º–ø–ª–µ–º–µ–Ω—Ç—É–π—Ç–µ –ª–æ–≥—ñ–∫—É –∞–≥–µ–Ω—Ç–∞
3. –î–æ–¥–∞–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—é –≤ `main.py`
4. –û–Ω–æ–≤—ñ—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è
curl http://localhost:8000/health

# –¢–µ—Å—Ç —á–∞—Ç—É
curl -X POST http://localhost:8000/api/v1/chat/send \\
  -H "Content-Type: application/json" \\
  -H "X-API-KEY: supersecretapikey" \\
  -d '{"message": "–ü—Ä–∏–≤—ñ—Ç!", "user_id": "test"}'
```

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥—ñ–≤

```bash
# –î–∏–≤–∏—Ç–∏—Å—è –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ (—è–∫—â–æ run.sh –∑–∞–ø—É—â–µ–Ω–∏–π)
tail -f logs/backend.log

# –ê–±–æ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ output uvicorn
./run.sh
```

## üìä Production Deployment

### Nginx –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

```nginx
server {
    listen 443 ssl;
    server_name yourdomain.com;
    
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

### Production –∑–∞–ø—É—Å–∫

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ production –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install gunicorn

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∑ Gunicorn
gunicorn main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000
```

## üêû Troubleshooting

### –ü–æ—Ä—Ç –∑–∞–π–Ω—è—Ç–∏–π
```bash
# –ó–Ω–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å
lsof -ti:8000

# –ó–∞–≤–µ—Ä—à–∏—Ç–∏ –ø—Ä–æ—Ü–µ—Å
kill -9 $(lsof -ti:8000)
```

### API Key –ø–æ–º–∏–ª–∫–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `.env` —Ñ–∞–π–ª
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ `CRASHCURSE_API_KEY` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å backend –ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏ `.env`

### –ü–æ–º–∏–ª–∫–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```bash
# –ü–µ—Ä–µ–≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install --upgrade -r requirements.txt
```

## üì¶ Docker (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

```dockerfile
FROM python:3.11-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .
EXPOSE 8000

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
```

## ü§ù Contribution

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
2. –°—Ç–≤–æ—Ä—ñ—Ç—å feature branch (`git checkout -b feature/amazing-feature`)
3. Commit –∑–º—ñ–Ω–∏ (`git commit -m 'Add amazing feature'`)
4. Push –¥–æ branch (`git push origin feature/amazing-feature`)
5. –°—Ç–≤–æ—Ä—ñ—Ç—å Pull Request

## üìù –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License - –¥–µ—Ç–∞–ª—ñ –≤ —Ñ–∞–π–ª—ñ LICENSE

## üÜò –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API**: http://localhost:8000/docs
- **Issues**: GitHub Issues
- **Health Check**: http://localhost:8000/health

---

**üöóüí® –†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –∫–æ–º–∞–Ω–¥–æ—é CrashCurse** 